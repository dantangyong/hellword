<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mht.define.portal.cms.dao.AppAuthRoleDao">
    <sql id="columns">
    	a.app_name as 'app.appName',
    	a.id as 'app.id',
    	ar.role_id as 'roleId',
		ar.app_id as 'appId',
		ar.access_Auth as 'accessAuth'
    </sql>
    
	<select id="findListByRoleId" resultType="AppAuthRole">
        SELECT 
            <include refid="columns"/>
        from mht_portal.cms_front_app a
        LEFT JOIN mht_portal.app_auth_role ar on a.id = ar.app_id
		<if test="roleId != null and roleId != ''">
        	AND ar.role_id=#{roleId}
        </if>
        LEFT JOIN mht_base.sys_role sr on ar.role_id = sr.id
        WHERE a.del_flag='0'
        ORDER BY a.sort ASC
    </select>
	
	
	<insert id="insert">
		INSERT INTO mht_portal.app_auth_role (
	        role_id,
	        access_auth,
	        app_id
		) VALUES (
            #{roleId},
            #{accessAuth},
			#{appId}
		)
	</insert>
		
	<delete id="deleteByRoleId">
		delete from mht_portal.app_auth_role where role_id = #{roleId}
	</delete>
	
</mapper>